cd /home/geehong/firemarkets-app && cat .env

- docker-compose ps
    NAME                                  IMAGE                                                                     COMMAND                   SERVICE                  CREATED        STATUS                    PORTS
    fire_markets_backend                  firemarkets-app-backend                                                   "uvicorn app.admin_mâ€¦"   backend                  2 days ago     Up 2 days (healthy)       0.0.0.0:8001->8000/tcp, [::]:8001->8000/tcp
    fire_markets_data_processor           firemarkets-app-data_processor                                            "python -m app.serviâ€¦"   data_processor           22 hours ago   Up 22 hours (unhealthy)   8000/tcp
    fire_markets_db                       mysql:8.0                                                                 "docker-entrypoint.sâ€¦"   db                       3 days ago     Up 13 hours (healthy)     3306/tcp, 33060/tcp
    fire_markets_frontend                 firemarkets-app-frontend                                                  "docker-entrypoint.sâ€¦"   frontend                 3 days ago     Up 3 days                 0.0.0.0:3000->80/tcp, [::]:3000->80/tcp
    fire_markets_phpmyadmin               phpmyadmin/phpmyadmin                                                     "/docker-entrypoint.â€¦"   phpmyadmin               3 days ago     Up 3 days                 80/tcp
    fire_markets_redis                    redis:7-alpine                                                            "docker-entrypoint.sâ€¦"   redis                    3 days ago     Up 3 days (healthy)       6379/tcp
    fire_markets_scheduler                sha256:9027ebfcb740e138dde938f6b09db77d037280c8f7f8a8e4dbb9588ce66d6d67   "python -m app.serviâ€¦"   scheduler                3 days ago     Up 2 days (unhealthy)     8000/tcp
    fire_markets_websocket_orchestrator   firemarkets-app-websocket_orchestrator                                    "python run_websockeâ€¦"   websocket_orchestrator   22 hours ago   Up 22 hours (unhealthy)   8000/tcp
    nginx-proxy-manager                   jc21/nginx-proxy-manager:latest                                           "/init"                   nginx-proxy-manager      3 days ago     Up 3 days                 0.0.0.0:80-81->80-81/tcp, [::]:80-81->80-81/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp
    portainer                             portainer/portainer-ce:latest                                             "/portainer"              portainer                3 days ago     Up 3 days                 0.0.0.0:8000->8000/tcp, [::]:8000->8000/tcp, 0.0.0.0:9443->9443/tcp, [::]:9443->9443/tcp, 9000/tcp

#mysql settiing
DB_HOSTNAME=db # Docker ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ MySQL ì„œë¹„ìŠ¤ì˜ ì´ë¦„ (localhostê°€ ì•„ë‹˜)
DB_DATABASE=markets
DB_USERNAME=geehong
DB_PASSWORD=Power6100
DB_ROOT_PASSWORD=Power6740 # MySQL root ê³„ì • ë¹„ë°€ë²ˆí˜¸

# PostgreSQL Settings
DB_HOSTNAME_PG=db_postgres
DB_PORT_PG=5432
DB_DATABASE_PG=markets
DB_USERNAME_PG=geehong
DB_PASSWORD_PG=Power6100
    
geehong@home-pc:~/firemarkets-app$ docker-compose exec db mysql -u geehong -pPower6100 markets -e "SHOW TABLES;"
mysql: [Warning] Using a password on the command line interface can be insecure.
+-----------------------------+
| Tables_in_markets           |
+-----------------------------+
| active_assets               |
| api_call_logs               |
| app_configurations          |
| apscheduler_jobs            |
| asset_type_stats            |
| asset_types                 |
| assets                      |
| audit_logs                  |
| bond_market_data            |
| crypto_data                 |
| crypto_metrics              |
| economic_indicators         |
| etf_info                    |
| index_infos                 |
| m2_data                     |
| ohlcv_data_backup           |
| ohlcv_day_data              |
| ohlcv_intraday_data         |
| onchain_metrics_info        |
| realtime_quotes             |
| realtime_quotes_time_delay  |
| scheduler_logs              |
| scraping_logs               |
| sparkline_data              |
| stock_analyst_estimates     |
| stock_financials            |
| stock_profiles              |
| technical_indicators        |
| token_blacklist             |
| user_sessions               |
| users                       |
| websocket_orchestrator_logs |
| world_assets_ranking        |
+-----------------------------+


DB COMMAND
ì œì•½ ì¡°ê±´ì„ í™•ì¸
docker-compose exec db mysql -u geehong -pPower6100 markets -e "SHOW INDEX FROM ohlcv_day_data;"
ì¤‘ë³µìë£Œ í™•ì¸
docker-compose exec db mysql -u geehong -pPower6100 markets -e "SELECT asset_id, timestamp_utc, COUNT(*) as count FROM ohlcv_day_data GROUP BY asset_id, timestamp_utc HAVING COUNT(*) > 1 LIMIT 10;"


Docker command 
ì´ˆê¸°í™” ë° ë¹Œë“œ
wsl : 
sudo service docker start && docker compose down --volumes && docker compose up --build -d
docker compose down && docker compose up --build -d

windows terminal:
docker-compose down pgadmin && docker compose up --build -d pgadmin
docker-compose up -d --build backend //ë°±ì—”ë“œë§Œ ë¹Œë“œ
docker-compose up -d --build frontend
docker-compose up -d --build scheduler
docker-compose restart scheduler
docker-compose restart backend_temp
docker-compose restart nginx-proxy-manager
docker-compose build backend && docker-compose up -d backend
docker-compose build backend | cat && docker-compose up -d backend | cat
docker-compose build backend scheduler data_processor | cat && docker-compose up -d --no-deps --force-recreate backend scheduler data_processor | cat && sleep 3 && docker-compose ps | cat
docker-compose build backend data_processor | cat && docker-compose up -d --no-deps --force-recreate backend data_processor | cat && sleep 3 && docker-compose ps | cat

docker-compose build websocket_orchestrator data_processor | cat && docker-compose up -d --no-deps --force-recreate websocket_orchestrator data_processor | cat && sleep 3 && docker-compose ps | cat
docker-compose build data_processor  && docker-compose restart data_processor
docker-compose build scheduler && docker-compose restart scheduler
docker-compose build frontend && docker-compose restart frontend 
docker-compose build backend && docker-compose restart frontend 

docker-compose build websocket_orchestrator data_processor && docker-compose restart websocket_orchestrator  data_processor 
docker-compose build websocket_orchestrator  && docker-compose restart websocket_orchestrator
docker-compose down websocket_orchestrator && docker-compose build websocket_orchestrator  && docker-compose restart websocket_orchestrator
docker-compose build websocket_orchestrator | cat && docker-compose up -d --no-deps --force-recreate websocket_orchestrator | cat
docker-compose down websocket_orchestrator && docker-compose build websocket_orchestrator && docker-compose up -d websocket_orchestrator
docker-compose build websocket_orchestrator scheduler data_processor | cat && docker-compose up -d --no-deps --force-recreate websocket_orchestrator scheduler data_processor | cat && sleep 3 && docker-compose ps | cat

docker-compose build backend data_processor | cat && docker-compose up -d backend data_processor | cat
docker-compose --profile processing up -d data_processor scheduler
docker-compose --profile 8001 up -d websocket_orchestrator
docker-compose down data_processor && docker-compose build data_processor && docker-compose up -d data_processor
docker-compose build websocket_orchestrator | cat && docker-compose up -d --no-deps --force-recreate websocket_orchestrator | cat && sleep 3 && docker ps --format '{{.Names}}\t{{.Status}}' | grep websocket_orchestrator | cat
docker-compose down pgadmin && docker-compose up -d pgadmin
docker-compose build data_processor scheduler backend && docker-compose up -d --no-deps --force-recreate data_processor scheduler backend && sleep 3 && docker-compose ps && echo '--- Data Processor Logs ---' && docker-compose logs data_processor --tail 120 | cat && echo '--- Scheduler Logs ---' && docker-compose logs scheduler --tail 120 | cat && echo '--- Backend Logs ---' && docker-compose logs backend --tail 80 | cat

docker-compose logs scheduler backend 
docker-compose logs data_processor --tail 50 -f | grep -Ei "OHLCV ë°ì´í„° ì €ì¥ (ì‹œì‘|ì™„ë£Œ)"
docker-compose logs data_processor --tail 50 -f | grep -Ei "ì €ì¥"docker-compose logs data_processor --tail 100 -f | grep -E "(ìì‚° ë§¤ì¹­ ì„±ê³µ|DB ì €ì¥ ì„±ê³µ|âœ….*ì„±ê³µ)"
docker-compose logs data_processor --tail 50 -f | grep -Ei "OHLCV ë°ì´í„° ì €ì¥ ì™„ë£Œ: .*table=ohlcv_(day|intraday)_data"
docker-compose logs websocket_orchestrator --tail 50 -f | grep -Ei "binance"
docker logs fire_markets_websocket_orchestrator --tail 20 | grep -A 5 -B 5 "binance connection failed"
docker-compose logs data_processor --tail 50 -f | grep -Ei "ì €ì¥ (ì‹œì‘|ì™„ë£Œ)"
docker-compose logs data_processor --tail 50 -f | grep -Ei "ì €ì¥ (ì‹œì‘|ì™„ë£Œ|ì„±ê³µ|ì‹¤íŒ¨|ì˜¤ë¥˜|error|success)"
docker-compose logs --tail=30 -f data_processor | grep -E "(ì €ì¥|save|insert|ì„±ê³µ|ì™„ë£Œ|ACK|ì²˜ë¦¬)"
ocker-compose logs --since=30m data_processor | grep -E "í™œì„± ì•”í˜¸í™”í ì†ŒìŠ¤|ì†ŒìŠ¤ í—¬ìŠ¤|binance|coinbase" | tail -n 200 | cat
docker-compose logs websocket_orchestrator --tail 200000 | grep -i -E "(binance|finhub|error|failed|connection|disconnect)"
docker-compose logs websocket_orchestrator --tail 2000000000 | grep -i -E "(binance|error|failed|connection|disconnect)" | head -20
docker-compose logs scheduler --tail 200000 | grep -i -E "(error|ERROR)"
docker-compose logs data_processor --tail 200000 | grep -i -E "(PostgreSQL ì €ì¥ì¥|ì €ì¥|ì‹¤íŒ¨íŒ¨)"
docker-compose logs data_processor --tail 50 -f | grep -E "(stock_profile|stock_financials|stock_estimate|ì´ì¤‘|dual|StockProfile|StockFinancial|StockAnalystEstimate)"

docker-compose exec redis redis-cli 
    KEYS *binance*        
            geehong@home-pc:~/firemarkets-app$ docker-compose exec redis redis-cli
            127.0.0.1:6379> KEYS *binance*
            1) "binance:realtime"
            127.0.0.1:6379> XLEN "binance:realtime"
            (integer) 1042
            127.0.0.1:6379>


docker-compose logs data_processor --tail 100 | grep -E "(í™œì„±|active|binance|coinbase|í˜ì¼ì˜¤ë²„)"
docker-compose logs data_processor --tail 200 | grep -E "(ì†ŒìŠ¤|source|í—¬ìŠ¤|health|binance|coinbase)" | head -20
docker-compose logs data_processor --tail 500 | grep -E "(í™œì„±|active|binance|coinbase|í˜ì¼ì˜¤ë²„|ì†ŒìŠ¤.*ì„ íƒ|source.*selected)" | head -10
docker-compose logs data_processor --tail 1000 | grep -E "(binance.*í—¬ìŠ¤|binance.*health|binance.*ì†ŒìŠ¤|binance.*source)" | head -10
docker-compose logs data_processor --tail 1000 | grep -E "(binance.*ìŠ¤íŠ¸ë¦¼|binance.*stream|binance.*ì½ê¸°|binance.*read)" | head -10
docker-compose logs data_processor --tail 1000 | grep -E "(ìŠ¤íŠ¸ë¦¼.*ì½ê¸°|stream.*read|ìŠ¤íŠ¸ë¦¼.*ì²˜ë¦¬|stream.*process)" | head -10
docker-compose logs data_processor --tail 1000 | grep -E "(ì‹œì‘|start|main|loop)" | head -10
docker-compose logs data_processor --tail 1000 | grep -E "(ìŠ¤íŠ¸ë¦¼.*ì—ì„œ|stream.*from|ìŠ¤íŠ¸ë¦¼.*ì²˜ë¦¬|stream.*process)" | head -1
docker-compose logs websocket_orchestrator --tail 1000000 | grep -E "(error|Error|ERROR|failed|Failed|FAILED|exception|Exception|EXCEPTION)"
docker-compose logs websocket_orchestrator --tail 1000000 | head -20
docker-compose logs websocket_orchestrator --since 24h | grep -E "(ì‹œì‘|start|orchestrator|main|init)" | head -10
docker-compose logs websocket_orchestrator --since 20m | grep -E "(ì‹œì‘|start|orchestrator|main|init|batch|log)" | head -10
docker-compose logs websocket_orchestrator --since 5m | grep -E "(Starting|ì‹œì‘|orchestrator|main|init|WebSocket|Orchestrator)" | head -20
docker-compose logs websocket_orchestrator --since 5m | grep -E "(Loading|assets|consumer|initialization|Starting|ì‹œì‘)" | head -20
docker-compose logs websocket_orchestrator --since 5m | grep -E "(Initializing|Initialized|consumer|enabled|disabled)" | head -20
docker-compose logs websocket_orchestrator --since 5m | grep -E "(completed|rebalance|assignment|task|Starting|Started)" | head -20
docker-compose logs websocket_orchestrator --since 5m | grep -E "(connected|subscribed|started|task|Creating|Starting)" | head -20
docker-compose logs websocket_orchestrator --since 1m | grep -E "(batch|save|database|Processing|Successfully)" | head -10
docker-compose logs websocket_orchestrator --since 5m | grep -E "(batch|processor|log|start|started)" | head -20
docker-compose logs websocket_orchestrator --since 24h | grep -E "(finnhub.*received|finnhub.*message|finnhub.*ğŸ“¨)" | head -20
docker-compose logs websocket_orchestrator --since 48h | grep -E "(finnhub.*ğŸ“ˆ|finnhub.*price|finnhub.*data)" | head -20

docker-compose logs websocket_orchestrator | grep -E "(finnhub.*received|finnhub.*message|finnhub.*ğŸ“¨)" | tail -10
$ docker-compose logs websocket_orchestrator | grep -E "(finnhub.*ğŸ“ˆ|finnhub.*price|finnhub.*data)" | tail -10
echo '--- Scheduler ---' && docker-compose logs scheduler --tail 2000 | grep -iE "error|ì˜¤ë¥˜|failed|exception" | grep -v "429" | cat && echo '--- Data Processor ---' && docker-compose logs data_processor --tail 2000 | grep -iE "error|ì˜¤ë¥˜|failed|exception" | grep -v "429" | cat && echo '--- Backend ---' && docker-compose logs backend --tail 2000 | grep -iE "error|ì˜¤ë¥˜|failed|exception|traceback" | grep -v "429" | cat
$ docker logs fire_markets_scheduler --since="2025-09-20T06:00:00" --until="2025-09-20T06:05:00" | grep -E "(onchain|Onchain|collection|job|ERROR|WARNING|Exception|Traceback)"



curl -s "https://finnhub.io/api/v1/quote?symbol=AAPL&token=$(docker exec fire_markets_backend printenv FINNHUB_API_KEY)" | head -5
curl -X GET "http://localhost:8001/api/v1/realtime/pg/quotes-price?asset_identifier=1" | jq





wsl phpmyadmin : http://localhost:8080/index.php
ë°©ë²• 1: ì»¨í…Œì´ë„ˆ IDë¡œ ì •ì§€
bash
docker stop 5ea468975150 fc28d4a3c8f0
ë°©ë²• 2: ì»¨í…Œì´ë„ˆ ì´ë¦„ìœ¼ë¡œ ì •ì§€
bash
docker stop financial_frontend financial_backend
ë°©ë²• 3: í•œ ë²ˆì— ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ì •ì§€
bash
docker stop financial_frontend financial_backend
ë„ì»¤ì˜ í•µì‹¬ ëª…ë ¹ì–´ë“¤ì„ ê¸°ëŠ¥ë³„ë¡œ ì •ë¦¬í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

## ì´ë¯¸ì§€ ê´€ë ¨ ëª…ë ¹ì–´

**ì´ë¯¸ì§€ ê²€ìƒ‰ ë° ë‹¤ìš´ë¡œë“œ**
- `docker search [ì´ë¯¸ì§€ëª…]` - Docker Hubì—ì„œ ì´ë¯¸ì§€ ê²€ìƒ‰
- `docker pull [ì´ë¯¸ì§€ëª…]` - ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
- `docker images` ë˜ëŠ” `docker image ls` - ë¡œì»¬ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ

**ì´ë¯¸ì§€ ë¹Œë“œ ë° ê´€ë¦¬**
- `docker build -t [íƒœê·¸ëª…] [ê²½ë¡œ]` - Dockerfileë¡œ ì´ë¯¸ì§€ ë¹Œë“œ
- `docker rmi [ì´ë¯¸ì§€ID/ì´ë¯¸ì§€ëª…]` - ì´ë¯¸ì§€ ì‚­ì œ
- `docker image prune` - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ì •ë¦¬

## ì»¨í…Œì´ë„ˆ ê´€ë ¨ ëª…ë ¹ì–´

**ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
- `docker run [ì˜µì…˜] [ì´ë¯¸ì§€ëª…]` - ìƒˆ ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹¤í–‰
- `docker start [ì»¨í…Œì´ë„ˆID/ì´ë¦„]` - ì¤‘ì§€ëœ ì»¨í…Œì´ë„ˆ ì‹œì‘
- `docker stop [ì»¨í…Œì´ë„ˆID/ì´ë¦„]` - ì»¨í…Œì´ë„ˆ ì¤‘ì§€
-  docker stop $(docker ps -q) ëª¨ë“  ì»¨í…Œì´ë„ˆ ì¤‘ì§€
- `docker restart [ì»¨í…Œì´ë„ˆID/ì´ë¦„]` - ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

**ì»¨í…Œì´ë„ˆ ì¡°íšŒ ë° ê´€ë¦¬**
- `docker ps` - ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¡°íšŒ
- `docker ps -a` - ëª¨ë“  ì»¨í…Œì´ë„ˆ ì¡°íšŒ (ì¤‘ì§€ëœ ê²ƒ í¬í•¨)
- `docker rm [ì»¨í…Œì´ë„ˆID/ì´ë¦„]` - ì»¨í…Œì´ë„ˆ ì‚­ì œ
- `docker container prune` - ì¤‘ì§€ëœ ì»¨í…Œì´ë„ˆ ì¼ê´„ ì‚­ì œ

## ì»¨í…Œì´ë„ˆ ìƒí˜¸ì‘ìš©

**ì»¨í…Œì´ë„ˆ ì ‘ê·¼**
- `docker exec -it [ì»¨í…Œì´ë„ˆID/ì´ë¦„] /bin/bash` - ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†
- `docker attach [ì»¨í…Œì´ë„ˆID/ì´ë¦„]` - ì»¨í…Œì´ë„ˆì˜ ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì— ì—°ê²°

**ë¡œê·¸ ë° ì •ë³´ í™•ì¸**
- `docker logs [ì»¨í…Œì´ë„ˆID/ì´ë¦„]` - ì»¨í…Œì´ë„ˆ ë¡œê·¸ ì¡°íšŒ
- `docker inspect [ì»¨í…Œì´ë„ˆID/ì´ë¦„]` - ì»¨í…Œì´ë„ˆ ìƒì„¸ ì •ë³´ ì¡°íšŒ
- `docker stats` - ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
docker compose logs backend

## ìœ ìš©í•œ run ì˜µì…˜ë“¤

- `-d` : ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ (detached)
- `-it` : ì¸í„°ë™í‹°ë¸Œ í„°ë¯¸ë„ ëª¨ë“œ
- `-p [í˜¸ìŠ¤íŠ¸í¬íŠ¸]:[ì»¨í…Œì´ë„ˆí¬íŠ¸]` : í¬íŠ¸ í¬ì›Œë”©
- `-v [í˜¸ìŠ¤íŠ¸ê²½ë¡œ]:[ì»¨í…Œì´ë„ˆê²½ë¡œ]` : ë³¼ë¥¨ ë§ˆìš´íŠ¸
- `--name [ì´ë¦„]` : ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •
- `--rm` : ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì‹œ ìë™ ì‚­ì œ

## ì‹œìŠ¤í…œ ê´€ë¦¬

- `docker system df` - ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ í™•ì¸
- `docker system prune` - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì •ë¦¬
- `docker version` - Docker ë²„ì „ ì •ë³´
- `docker info` - Docker ì‹œìŠ¤í…œ ì •ë³´
bash command

í•œë‹¬ì— 1ë²ˆì •ë„ ì„œë²„ ê³µê°„í™•ë³´
df -h ì—¬ìœ ê³µê°„ ê²€ì‚¬
docker system prune -a -f 
docker system prune -a -f --volumes


ì••ì¶•
tar  --exclude='node_modules' --exclude='venv' --exclude='.git -czvf firemarkets-app_2025_08_04_08_47.tar.gz firemarkets-app
tar --exclude='node_modules' --exclude='venv' --exclude='.git' -czf firemarkets_app__2025_08_18_15_050.tar.gz .



# .env
DB_HOSTNAME=db # Docker ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ MySQL ì„œë¹„ìŠ¤ì˜ ì´ë¦„ (localhostê°€ ì•„ë‹˜)
DB_DATABASE=markets
DB_USERNAME=geehong
DB_PASSWORD=Power6100
DB_ROOT_PASSWORD=Power6740 # MySQL root ê³„ì • ë¹„ë°€ë²ˆí˜¸

EODHD_API_KEY=6851fda9861c01.75472022 # https://eodhd.com/api/fundamentals/AAPL.US?api_token=demo&fmt=json
ALPHA_VANTAGE_API_KEY_1=MJ965EHM5S48YVCV
ALPHA_VANTAGE_API_KEY_2=ZYIWDUTRJ5VDSMMF
ALPHA_VANTAGE_API_KEY_3=4D6E0FWKL4IZ0UFV

FMP_API_KEY=uwuvgPqE1bzAKJB1LAdkerZdp273Bvk1
COIN_MARKET_API_KEY=e0d46b45-86dd-4756-81c6-a26391122391
TOKEN_METRICS_API_KEY=tm-ca31b6c6-3eae-4929-837a-bec0fb1e664e 
COIN_GECKO_API_KEY=CG-aiuQjnSAoeVfuhbY1Q9uZysu	
#app.tokenmetrics.com
# Crypto API Keys
COINMARKETCAP_API_KEY=e0d46b45-86dd-4756-81c6-a26391122391
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here
COINBASE_API_KEY=your_coinbase_api_key_here
COINBASE_SECRET_KEY=your_coinbase_secret_key_here
#git

git commit -m "Update admin features and UI components - Add scheduler controls - Update AppHeader with admin menu - Add user avatar - Update crypto endpoints and collectors - Improve admin management interface"

git push origin main

