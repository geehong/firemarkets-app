# ğŸŒ World Assets TreeMap í”„ë¡œì íŠ¸

ì´ í”„ë¡œì íŠ¸ëŠ” ì„¸ê³„ ìì‚° ì‹œì¥ì„ TreeMapìœ¼ë¡œ ì‹œê°í™”í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. Highchartsë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í„°ë™í‹°ë¸Œí•œ TreeMap ì°¨íŠ¸ë¥¼ ì œê³µí•˜ë©°, ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘ ë° ì‹œê°í™” ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤.

## ğŸ“‹ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
financeWebApp02/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ world_assets.py          # World Assets ëª¨ë¸
â”‚   â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ world_assets_service.py  # ë°ì´í„° ìˆ˜ì§‘ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”‚   â””â”€â”€ world_assets.py          # API ë¼ìš°í„°
â”‚   â”‚   â””â”€â”€ core.py                      # ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •
â”‚   â””â”€â”€ create_world_assets_tables.sql   # DB í…Œì´ë¸” ìƒì„± ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ views/
â”‚       â”‚   â””â”€â”€ treemap/
â”‚       â”‚       â””â”€â”€ TreeMapPage.js       # ë©”ì¸ TreeMap í˜ì´ì§€
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â””â”€â”€ charts/
â”‚       â”‚       â”œâ”€â”€ TreeMapChart.js      # Highcharts TreeMap ì»´í¬ë„ŒíŠ¸
â”‚       â”‚       â”œâ”€â”€ TreeMapControls.js   # í•„í„°/ì„¤ì • ì»¨íŠ¸ë¡¤
â”‚       â”‚       â””â”€â”€ TreeMapLegend.js     # ë²”ë¡€ ì»´í¬ë„ŒíŠ¸
â”‚       â””â”€â”€ hooks/
â”‚           â””â”€â”€ useTreeMapData.js        # TreeMap ë°ì´í„° ê´€ë¦¬ í›…
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ë°±ì—”ë“œ ì„¤ì •

```bash
cd backend

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±
psql -U your_username -d your_database -f create_world_assets_tables.sql

# ë˜ëŠ” Python ìŠ¤í¬ë¦½íŠ¸ë¡œ í…Œì´ë¸” ìƒì„±
python create_tables.py

# ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
python run.py
```

### 2. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •

```bash
cd frontend

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm start
```

## ğŸ“Š ì£¼ìš” ê¸°ëŠ¥

### 1. ë°ì´í„° ìˆ˜ì§‘

- **companiesmarketcap.com**ì—ì„œ ì‹¤ì‹œê°„ ìì‚° ìˆœìœ„ ë°ì´í„° ìˆ˜ì§‘
- **BIS (Bank for International Settlements)**ì—ì„œ ê¸€ë¡œë²Œ ì±„ê¶Œ ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
- ìë™ ìŠ¤ì¼€ì¤„ë§ (6ì‹œê°„ë§ˆë‹¤ ë°ì´í„° ì—…ë°ì´íŠ¸)

### 2. TreeMap ì‹œê°í™”

- **ì¹´í…Œê³ ë¦¬ë³„**: Stocks, Crypto, ETF, Bonds ë“±
- **êµ­ê°€ë³„**: ë¯¸êµ­, ì¤‘êµ­, ì¼ë³¸, ì˜êµ­ ë“±
- **ì„¹í„°ë³„**: Technology, Financial, Healthcare ë“±
- **ì„±ëŠ¥ ìƒ‰ìƒ**: ë¹¨ê°•(ì†ì‹¤) ~ ì´ˆë¡(ì´ìµ)

### 3. ì¸í„°ë™í‹°ë¸Œ ê¸°ëŠ¥

- ë“œë¦´ë‹¤ìš´: ê·¸ë£¹ í´ë¦­ ì‹œ ìƒì„¸ ë³´ê¸°
- í•„í„°ë§: ì¹´í…Œê³ ë¦¬, êµ­ê°€, ì„¹í„°ë³„ í•„í„°
- ê²€ìƒ‰: ìì‚°ëª… ë˜ëŠ” í‹°ì»¤ë¡œ ê²€ìƒ‰
- ì‹¤ì‹œê°„ ë°ì´í„° ìƒˆë¡œê³ ì¹¨

## ğŸ”§ API ì—”ë“œí¬ì¸íŠ¸

### ìì‚° ë°ì´í„°

- `GET /api/world-assets/ranking` - ìì‚° ìˆœìœ„ ë°ì´í„°
- `GET /api/world-assets/treemap` - TreeMap í˜•ì‹ ë°ì´í„°
- `GET /api/world-assets/bond-market` - ì±„ê¶Œ ì‹œì¥ ë°ì´í„°
- `GET /api/world-assets/stats` - í†µê³„ ì •ë³´

### ë°ì´í„° ìˆ˜ì§‘

- `POST /api/world-assets/collect-data` - ìˆ˜ë™ ë°ì´í„° ìˆ˜ì§‘
- `GET /api/world-assets/collect-status` - ìˆ˜ì§‘ ìƒíƒœ í™•ì¸
- `GET /api/world-assets/scraping-logs` - ìˆ˜ì§‘ ë¡œê·¸

## ğŸ¨ TreeMap ì°¨íŠ¸ íŠ¹ì§•

### Highcharts ì„¤ì •

- **ë‹¤í¬ í…Œë§ˆ**: `#252931` ë°°ê²½ìƒ‰
- **ìƒ‰ìƒ ì¶•**: ë¹¨ê°•(-10%) ~ íšŒìƒ‰(0%) ~ ì´ˆë¡(+10%)
- **ë ˆì´ë¸”**: ìì‚°ëª…ê³¼ ì„±ëŠ¥ í‘œì‹œ
- **íˆ´íŒ**: ì‹œê°€ì´ì•¡, ê°€ê²©, ë³€ë™ë¥  ì •ë³´

### ë°ì´í„° êµ¬ì¡°

```javascript
{
  id: "category_name",
  name: "Category Name",
  value: total_market_cap,
  children: [
    {
      id: "asset_ticker",
      name: "Asset Name",
      value: market_cap,
      colorValue: daily_change_percent,
      custom: {
        ticker: "TICKER",
        price: 150.00,
        change: 2.5,
        country: "United States",
        sector: "Technology"
      }
    }
  ]
}
```

## ğŸ“ˆ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### world_assets_ranking

- `rank`: ìˆœìœ„
- `name`: ìì‚°ëª…
- `ticker`: í‹°ì»¤
- `market_cap_usd`: ì‹œê°€ì´ì•¡ (USD)
- `price_usd`: ê°€ê²© (USD)
- `daily_change_percent`: ì¼ì¼ ë³€ë™ë¥ 
- `category`: ì¹´í…Œê³ ë¦¬
- `country`: êµ­ê°€
- `sector`: ì„¹í„°
- `ranking_date`: ìˆœìœ„ ë‚ ì§œ

### bond_market_data

- `category`: ì±„ê¶Œ ì¹´í…Œê³ ë¦¬
- `market_size_usd`: ì‹œì¥ ê·œëª¨ (USD)
- `quarter`: ë¶„ê¸°
- `data_source`: ë°ì´í„° ì†ŒìŠ¤

### scraping_logs

- `source`: ë°ì´í„° ì†ŒìŠ¤
- `status`: ìˆ˜ì§‘ ìƒíƒœ
- `records_processed`: ì²˜ë¦¬ëœ ë ˆì½”ë“œ ìˆ˜
- `records_successful`: ì„±ê³µí•œ ë ˆì½”ë“œ ìˆ˜
- `execution_time_seconds`: ì‹¤í–‰ ì‹œê°„

## ğŸ”„ ìë™í™”

### ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •

- **World Assets ìˆ˜ì§‘**: 6ì‹œê°„ë§ˆë‹¤
- **OHLCV ë°ì´í„°**: 60ë¶„ë§ˆë‹¤
- **ì˜¨ì²´ì¸ ë°ì´í„°**: 24ì‹œê°„ë§ˆë‹¤
- **íšŒì‚¬ ì •ë³´**: 7ì¼ë§ˆë‹¤
- **ETF ì •ë³´**: 7ì¼ë§ˆë‹¤
- **ê¸°ìˆ ì  ì§€í‘œ**: 1ì¼ë§ˆë‹¤

### ëª¨ë‹ˆí„°ë§

- ìˆ˜ì§‘ ë¡œê·¸ ìë™ ê¸°ë¡
- ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì €ì¥
- ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
- ì„±ê³µ/ì‹¤íŒ¨ í†µê³„

## ğŸ¯ ì‚¬ìš©ë²•

1. **ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘**

   - ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
   - `/api/world-assets/collect-data` í˜¸ì¶œí•˜ì—¬ ì´ˆê¸° ë°ì´í„° ìˆ˜ì§‘

2. **TreeMap ì ‘ê·¼**

   - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `/world-assets-treemap` ê²½ë¡œ ì ‘ê·¼
   - ìë™ìœ¼ë¡œ ìµœì‹  ë°ì´í„° ë¡œë“œ

3. **í•„í„°ë§ ë° íƒìƒ‰**
   - View Type: ì¹´í…Œê³ ë¦¬/êµ­ê°€/ì„¹í„°ë³„ ë³´ê¸°
   - í•„í„°: íŠ¹ì • ì¹´í…Œê³ ë¦¬, êµ­ê°€, ì„¹í„° ì„ íƒ
   - ê²€ìƒ‰: ìì‚°ëª… ë˜ëŠ” í‹°ì»¤ë¡œ ê²€ìƒ‰
   - ë“œë¦´ë‹¤ìš´: ê·¸ë£¹ í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ

- **FastAPI**: REST API í”„ë ˆì„ì›Œí¬
- **SQLAlchemy**: ORM
- **PostgreSQL**: ë°ì´í„°ë² ì´ìŠ¤
- **BeautifulSoup**: ì›¹ ìŠ¤í¬ë˜í•‘
- **APScheduler**: ì‘ì—… ìŠ¤ì¼€ì¤„ë§

### í”„ë¡ íŠ¸ì—”ë“œ

- **React**: UI í”„ë ˆì„ì›Œí¬
- **Highcharts**: TreeMap ì°¨íŠ¸
- **CoreUI**: UI ì»´í¬ë„ŒíŠ¸
- **Axios**: HTTP í´ë¼ì´ì–¸íŠ¸

## ğŸ“ ê°œë°œ ë…¸íŠ¸

### ì£¼ìš” ê°œì„ ì‚¬í•­

1. **ECharts â†’ Highcharts**: ë” ë‚˜ì€ TreeMap ì§€ì›
2. **ëª¨ë“ˆí™”**: ì»´í¬ë„ŒíŠ¸ë³„ ë¶„ë¦¬
3. **ìë™í™”**: ìŠ¤ì¼€ì¤„ëŸ¬ í†µí•©
4. **ëª¨ë‹ˆí„°ë§**: ë¡œê¹… ì‹œìŠ¤í…œ êµ¬ì¶•

### í–¥í›„ ê³„íš

- [ ] ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸ (WebSocket)
- [ ] ë” ë§ì€ ë°ì´í„° ì†ŒìŠ¤ ì¶”ê°€
- [ ] ê³ ê¸‰ í•„í„°ë§ ì˜µì…˜
- [ ] ë°ì´í„° ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥
- [ ] ëª¨ë°”ì¼ ìµœì í™”

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

1. **ë°ì´í„°ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ**

   - ë°±ì—”ë“œ ì„œë²„ ìƒíƒœ í™•ì¸
   - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
   - API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸

2. **ì°¨íŠ¸ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ**

   - Highcharts ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ í™•ì¸
   - ë¸Œë¼ìš°ì € ì½˜ì†” ì˜¤ë¥˜ í™•ì¸
   - ë°ì´í„° í˜•ì‹ ê²€ì¦

3. **ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ**
   - ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ í™•ì¸
   - ë¡œê·¸ íŒŒì¼ í™•ì¸
   - ìˆ˜ë™ ë°ì´í„° ìˆ˜ì§‘ í…ŒìŠ¤íŠ¸

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.
